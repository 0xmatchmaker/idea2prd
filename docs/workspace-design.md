# Workspace å·¥ä½œå°è®¾è®¡æ–‡æ¡£

> ä» Idea åˆ° PRD çš„å¤šç‰ˆæœ¬è¿­ä»£å·¥ä½œå°

**åˆ›å»ºæ—¶é—´**: 2025-10-26
**æœ€åæ›´æ–°**: 2025-10-26
**çŠ¶æ€**: MVPå¼€å‘ä¸­

## ğŸš€ 2å°æ—¶ MVP æ–¹æ¡ˆ

**ç›®æ ‡**: 2å°æ—¶å†…å®Œæˆå¯ç”¨çš„æœ€å°ç‰ˆæœ¬
**å¯¹æ ‡**: diffchecker.com çš„ç®€æ´é£æ ¼
**æ ¸å¿ƒåŠŸèƒ½**:
1. âœ… åŒæ æ–‡æœ¬ç¼–è¾‘å™¨ï¼ˆå·¦å³å¯¹æ¯”ï¼‰
2. âœ… å®æ—¶ diff é«˜äº®æ˜¾ç¤º
3. âœ… å¤šç‰ˆæœ¬ä¿å­˜å’Œåˆ‡æ¢
4. âœ… AI å¯¹è¯ï¼ˆOpenRouter APIï¼‰
5. âœ… AI ç”Ÿæˆåœºæ™¯å›¾ç‰‡
6. âœ… ç®€æ´çš„è´¨é‡å¯è§†åŒ–

**ç•Œé¢å¸ƒå±€**ï¼ˆå‚è€ƒ diffcheckerï¼‰:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Logo]  Version: [v1 â–¼]  [ğŸ’¾ Save]  [ğŸ¨ Generate Image]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      â”‚                                     â”‚
â”‚   Version 1 (Old)    â”‚      Version 2 (New)                â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                â”‚ â”‚   â”‚                            â”‚   â”‚
â”‚   â”‚  Text Editor   â”‚ â”‚   â”‚  Text Editor               â”‚   â”‚
â”‚   â”‚                â”‚ â”‚   â”‚  (with diff highlighting)  â”‚   â”‚
â”‚   â”‚                â”‚ â”‚   â”‚                            â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                      â”‚                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  AI Assistant [ğŸ’¬]                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Chat with AI to improve your PRD...                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š Quality: 75/100  |  ğŸ“ Changes: +240  -15  |  ğŸ¨ Images â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
```

**æŠ€æœ¯æ ˆï¼ˆæœ€å°åŒ–ï¼‰**:
- Next.js + TypeScript
- shadcn/ui åŸºç¡€ç»„ä»¶
- diff-match-patchï¼ˆå¤ç”¨ index.htmlï¼‰
- OpenRouter APIï¼ˆæ–‡æœ¬ + å›¾ç‰‡ç”Ÿæˆï¼‰
- **Supabaseï¼ˆæ•°æ®åº“ + ç”¨æˆ·è®¤è¯ï¼‰**
- **Vercelï¼ˆéƒ¨ç½²ä¸Šçº¿ï¼‰**

**åŒ…å«ï¼ˆMVPå¿…éœ€ï¼‰**:
- âœ… ç”¨æˆ·ç™»å½•/æ³¨å†Œï¼ˆSupabase Authï¼‰
- âœ… äº‘ç«¯ç‰ˆæœ¬å­˜å‚¨ï¼ˆSupabase Databaseï¼‰
- âœ… ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²ï¼ˆVercelï¼‰
- âœ… ç¯å¢ƒå˜é‡é…ç½®

**ä¸åŒ…å«ï¼ˆåç»­è¿­ä»£ï¼‰**:
- âŒ å¤æ‚çš„PRDç« èŠ‚åˆ†æ
- âŒ å¤šç»´åº¦è´¨é‡è¯„åˆ†ç®—æ³•
- âŒ Monacoç¼–è¾‘å™¨ï¼ˆç”¨ç®€å•textareaï¼‰
- âŒ å¤šäººåä½œç¼–è¾‘

---

## ä¸€ã€é¡¹ç›®èƒŒæ™¯

### 1.1 é¡¹ç›®ç›®æ ‡
å°†ç°æœ‰çš„"è®ºæ–‡æ”¹å†™å¯¹æ¯”å·¥å…·"ï¼ˆindex.htmlï¼‰æ”¹é€ æˆä¸€ä¸ªä¸“é—¨ç”¨äº**ä» Idea åˆ° PRD æ–‡æ¡£**çš„è¿­ä»£å·¥ä½œå°ã€‚

### 1.2 æ ¸å¿ƒé—®é¢˜
- ä»æƒ³æ³•åˆ°æ ‡å‡†åŒ–PRDéœ€æ±‚æ–‡æ¡£éœ€è¦å¤šè½®è®¨è®ºå’Œè¿­ä»£
- éœ€è¦è¿½è¸ªæ¯æ¬¡ä¿®æ”¹çš„å†…å®¹å’Œè¿›æ­¥
- éœ€è¦AIè¾…åŠ©æ¥å¸®åŠ©å®Œå–„éœ€æ±‚ã€è¯†åˆ«é—®é¢˜
- éœ€è¦æŒ‰PRDæ ‡å‡†ç»´åº¦è¿›è¡Œè´¨é‡åˆ†æ

### 1.3 ç›¸ä¼¼æ€§åˆ†æ
è®ºæ–‡æ”¹å†™è¿‡ç¨‹å’ŒPRDè¿­ä»£è¿‡ç¨‹çš„ç›¸ä¼¼ä¹‹å¤„ï¼š
- âœ… éƒ½æ˜¯å¤šè½®è¿­ä»£å®Œå–„çš„è¿‡ç¨‹
- âœ… éœ€è¦å¯¹æ¯”ä¸åŒç‰ˆæœ¬çš„å˜åŒ–
- âœ… éœ€è¦è¯†åˆ«è¿›æ­¥å’Œå¾…æ”¹è¿›ç‚¹
- âœ… æœ‰æ ‡å‡†çš„ç»“æ„å’Œç« èŠ‚è¦æ±‚

---

## äºŒã€éœ€æ±‚ç¡®è®¤

### 2.1 é›†æˆæ–¹å¼
- **å†³å®š**: é›†æˆåˆ°ç°æœ‰ Next.js é¡¹ç›®ä¸­
- **è·¯ç”±**: `/workspace`
- **æŠ€æœ¯æ ˆ**: React + TypeScript + shadcn/ui

### 2.2 åˆ†æç»´åº¦
- **å†³å®š**: æŒ‰ PRD æ ‡å‡†ç« èŠ‚è¿›è¡Œåˆ†æ
- **è¦†ç›–ç« èŠ‚**:
  - é¡¹ç›®èƒŒæ™¯ (Background)
  - äº§å“ç›®æ ‡ (Goals)
  - ç›®æ ‡ç”¨æˆ· (Target Users)
  - ç”¨æˆ·åœºæ™¯ (User Scenarios)
  - æ ¸å¿ƒåŠŸèƒ½ (Core Features)
  - åŠŸèƒ½éœ€æ±‚ (Feature Requirements)
  - éåŠŸèƒ½éœ€æ±‚ (Non-functional Requirements)
  - æ•°æ®æŒ‡æ ‡ (Success Metrics)
  - æŠ€æœ¯æ–¹æ¡ˆ (Technical Solution)
  - é£é™©è¯„ä¼° (Risk Assessment)
  - é‡Œç¨‹ç¢‘ (Milestones)

### 2.3 ç‰ˆæœ¬ç®¡ç†
- **å†³å®š**: æ”¯æŒå¤šç‰ˆæœ¬è¿½è¸ªï¼ˆv1 â†’ v2 â†’ v3...ï¼‰
- **åŠŸèƒ½**:
  - ä¿å­˜ä»»æ„æ•°é‡çš„ç‰ˆæœ¬
  - é€‰æ‹©ä»»æ„ä¸¤ä¸ªç‰ˆæœ¬è¿›è¡Œå¯¹æ¯”
  - æ˜¾ç¤ºç‰ˆæœ¬æ¼”è¿›æ—¶é—´çº¿

### 2.4 AI è¾…åŠ©
- **å†³å®š**: é›†æˆ AI è¾…åŠ©åŠŸèƒ½
- **åŠŸèƒ½æ–¹å‘**:
  - ä» Idea ç”Ÿæˆ PRD æ¡†æ¶
  - å¯¹è¯å¼å®Œå–„éœ€æ±‚
  - æ™ºèƒ½åˆ†æçŸ›ç›¾å’Œé—æ¼
  - ç”Ÿæˆç”¨æˆ·åœºæ™¯ã€æµ‹è¯•ç”¨ä¾‹ç­‰

---

## ä¸‰ã€æ–¹æ¡ˆè®¾è®¡

### 3.1 é¡µé¢å¸ƒå±€

é‡‡ç”¨**ä¸‰æ å¼å¯è°ƒèŠ‚å¸ƒå±€**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Header: Idea2PRD Workspace                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              â”‚                  â”‚                            â”‚
â”‚  å·¦ä¾§        â”‚     ä¸­é—´         â”‚        å³ä¾§                â”‚
â”‚  ç‰ˆæœ¬ç®¡ç†    â”‚   AI å¯¹è¯åŠ©æ‰‹    â”‚    ç‰ˆæœ¬å¯¹æ¯” + è´¨é‡åˆ†æ     â”‚
â”‚              â”‚                  â”‚                            â”‚
â”‚  [æ—¶é—´çº¿]    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â€¢ v3 (now) â”‚  â”‚ AI Chat    â”‚  â”‚  â”‚  v2      â”‚   v3     â”‚  â”‚
â”‚  â€¢ v2        â”‚  â”‚ Interface  â”‚  â”‚  â”‚  (old)   â”‚  (new)   â”‚  â”‚
â”‚  â€¢ v1        â”‚  â”‚            â”‚  â”‚  â”‚          â”‚          â”‚  â”‚
â”‚              â”‚  â”‚            â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  [ç¼–è¾‘å™¨]    â”‚  â”‚            â”‚  â”‚                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  [è´¨é‡æŠ¥å‘Š]                â”‚
â”‚  â”‚ Editor â”‚  â”‚                  â”‚  ğŸ“‹ å®Œæ•´æ€§: 85%            â”‚
â”‚  â”‚        â”‚  â”‚  [å¿«æ·æŒ‡ä»¤]      â”‚  ğŸ¯ æ¸…æ™°åº¦: 70%            â”‚
â”‚  â”‚        â”‚  â”‚  â€¢ ç”Ÿæˆæ¡†æ¶      â”‚  ğŸ“Š æŒ‡æ ‡æ€§: 60%            â”‚
â”‚  â”‚        â”‚  â”‚  â€¢ å®Œå–„ç« èŠ‚      â”‚  âš¡ ä¼˜å…ˆçº§: 75%            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â€¢ é£é™©åˆ†æ      â”‚  ğŸ“ˆ æ€»åˆ†: 73/100           â”‚
â”‚              â”‚                  â”‚                            â”‚
â”‚  [ä¿å­˜ç‰ˆæœ¬]  â”‚                  â”‚  [æ”¹è¿›äº®ç‚¹]                â”‚
â”‚              â”‚                  â”‚  â€¢ æ–°å¢ç”¨æˆ·åœºæ™¯æè¿°...     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

#### 3.2.1 ç‰ˆæœ¬ç®¡ç†æ¨¡å—
**ç»„ä»¶**: `VersionTimeline.tsx`, `DocumentEditor.tsx`

**åŠŸèƒ½**:
- æ˜¾ç¤ºæ‰€æœ‰ä¿å­˜çš„ç‰ˆæœ¬ï¼ˆæ—¶é—´çº¿å½¢å¼ï¼‰
- åˆ‡æ¢å’ŒæŸ¥çœ‹ä¸åŒç‰ˆæœ¬
- ä¿å­˜å½“å‰å†…å®¹ä¸ºæ–°ç‰ˆæœ¬
- ä¸ºç‰ˆæœ¬æ·»åŠ æ ‡ç­¾/å¤‡æ³¨ï¼ˆå¦‚"åˆç¨¿"ã€"è®¨è®ºåv2"ï¼‰
- åˆ é™¤/å¯¼å‡ºç‰¹å®šç‰ˆæœ¬

**æ•°æ®ç»“æ„**:
```typescript
interface Version {
  id: string              // å”¯ä¸€ID
  number: number          // ç‰ˆæœ¬å· 1, 2, 3...
  content: string         // PRDæ–‡æ¡£å†…å®¹
  timestamp: Date         // åˆ›å»ºæ—¶é—´
  label?: string          // å¯é€‰æ ‡ç­¾
  aiContext?: AIMessage[] // å…³è”çš„AIå¯¹è¯å†å²
}
```

#### 3.2.2 AI å¯¹è¯åŠ©æ‰‹
**ç»„ä»¶**: `AIAssistant.tsx`

**åŠŸèƒ½**:
- ChatGPTå¼çš„å¯¹è¯ç•Œé¢
- å¿«æ·æŒ‡ä»¤æŒ‰é’®
- ä¸Šä¸‹æ–‡ç†è§£ï¼ˆçŸ¥é“å½“å‰PRDå†…å®¹ï¼‰
- æ’å…¥AIç”Ÿæˆçš„å†…å®¹åˆ°ç¼–è¾‘å™¨

**å¿«æ·æŒ‡ä»¤**:
| æŒ‡ä»¤ | åŠŸèƒ½ | Prompt æ¨¡æ¿ |
|------|------|------------|
| ğŸ¯ ç”Ÿæˆæ¡†æ¶ | ä»ä¸€å¥è¯Ideaç”Ÿæˆå®Œæ•´PRDæ¡†æ¶ | "æ ¹æ®è¿™ä¸ªæƒ³æ³•ç”ŸæˆPRDæ¡†æ¶ï¼š{idea}" |
| ğŸ“ å®Œå–„ç« èŠ‚ | æ·±å…¥å®Œå–„æŸä¸ªç« èŠ‚ | "è¯·å¸®æˆ‘å®Œå–„ã€{ç« èŠ‚å}ã€‘éƒ¨åˆ†" |
| ğŸ” è¯†åˆ«é—®é¢˜ | æ‰¾å‡ºéœ€æ±‚çŸ›ç›¾ã€é—æ¼ã€ä¸æ¸…æ™°çš„åœ°æ–¹ | "åˆ†æå½“å‰PRDçš„é—®é¢˜" |
| ğŸ‘¥ ç”Ÿæˆç”¨æˆ·åœºæ™¯ | ç”Ÿæˆå…·ä½“çš„ç”¨æˆ·æ•…äº‹ | "ä¸º{åŠŸèƒ½}ç”Ÿæˆ3ä¸ªç”¨æˆ·åœºæ™¯" |
| âš ï¸ é£é™©è¯„ä¼° | è¯†åˆ«æŠ€æœ¯é£é™©å’Œä¸šåŠ¡é£é™© | "è¯„ä¼°è¿™ä¸ªPRDçš„æ½œåœ¨é£é™©" |
| ğŸ“Š ç”ŸæˆæŒ‡æ ‡ | æä¾›å¯é‡åŒ–çš„æˆåŠŸæŒ‡æ ‡ | "ä¸ºè¿™äº›åŠŸèƒ½è®¾è®¡è¡¡é‡æŒ‡æ ‡" |

#### 3.2.3 ç‰ˆæœ¬å¯¹æ¯”æ¨¡å—
**ç»„ä»¶**: `DiffViewer.tsx`

**åŠŸèƒ½**:
- é€‰æ‹©ä¸¤ä¸ªç‰ˆæœ¬è¿›è¡Œå¯¹æ¯”
- åŒæ æ˜¾ç¤ºï¼ˆå·¦ï¼šæ—§ç‰ˆæœ¬ï¼Œå³ï¼šæ–°ç‰ˆæœ¬ï¼‰
- é«˜äº®æ˜¾ç¤ºï¼š
  - ğŸŸ¢ æ–°å¢å†…å®¹ï¼ˆç»¿è‰²é«˜äº®ï¼‰
  - ğŸ”´ åˆ é™¤å†…å®¹ï¼ˆçº¢è‰²åˆ é™¤çº¿ï¼‰
  - ğŸŸ¡ ä¿®æ”¹å†…å®¹ï¼ˆé»„è‰²é«˜äº®ï¼‰

**æŠ€æœ¯**:
- å¤ç”¨ `diff-match-patch` åº“
- æŒ‰è¡Œæˆ–æŒ‰æ®µè½è¿›è¡Œdiff

#### 3.2.4 è´¨é‡åˆ†ææ¨¡å—
**ç»„ä»¶**: `QualityReport.tsx`

**åŠŸèƒ½**:
- å®æ—¶åˆ†æå½“å‰PRDè´¨é‡
- å¤šç»´åº¦è¯„åˆ†
- å…·ä½“æ”¹è¿›å»ºè®®

**è´¨é‡ç»´åº¦**:
```typescript
interface QualityScore {
  completeness: number    // ğŸ“‹ éœ€æ±‚å®Œæ•´æ€§ 0-100
  clarity: number         // ğŸ¯ åœºæ™¯æ¸…æ™°åº¦ 0-100
  metrics: number         // ğŸ“Š æŒ‡æ ‡æ˜ç¡®æ€§ 0-100
  feasibility: number     // ğŸ› ï¸ æ–¹æ¡ˆå¯è¡Œæ€§ 0-100
  priority: number        // âš¡ ä¼˜å…ˆçº§æ’åº 0-100
  overall: number         // ğŸ“ˆ æ€»ä½“è¯„åˆ† 0-100
  insights: string[]      // æ”¹è¿›äº®ç‚¹åˆ—è¡¨
  suggestions: string[]   // å¾…æ”¹è¿›å»ºè®®
}
```

**è¯„åˆ†ç®—æ³•**ï¼ˆå‚è€ƒè®ºæ–‡å·¥å…·çš„é€»è¾‘ï¼‰:
1. **éœ€æ±‚å®Œæ•´æ€§**: æ£€æµ‹æ˜¯å¦åŒ…å«å¿…éœ€ç« èŠ‚ï¼ˆèƒŒæ™¯ã€ç›®æ ‡ã€åœºæ™¯ã€åŠŸèƒ½ç­‰ï¼‰
2. **åœºæ™¯æ¸…æ™°åº¦**: æ£€æµ‹ç”¨æˆ·åœºæ™¯æè¿°çš„å…·ä½“æ€§
   - å…³é”®è¯ï¼š"ä½œä¸º...ç”¨æˆ·"ã€"æˆ‘æƒ³è¦"ã€"ä»¥ä¾¿äº"
3. **æŒ‡æ ‡æ˜ç¡®æ€§**: æ£€æµ‹æ•°å­—ã€ç™¾åˆ†æ¯”ã€KPIæè¿°
   - æ­£åˆ™ï¼š`/\d+%|\d+[ä¸‡åƒç™¾]|DAU|MAU|è½¬åŒ–ç‡/`
4. **æ–¹æ¡ˆå¯è¡Œæ€§**: æ£€æµ‹æŠ€æœ¯æ–¹æ¡ˆã€å®ç°ç»†èŠ‚ã€é£é™©è¯„ä¼°ç« èŠ‚
5. **ä¼˜å…ˆçº§æ’åº**: æ£€æµ‹ P0/P1/P2ã€å¿…é¡»/é‡è¦/å¯é€‰ç­‰æ ‡è®°

---

## å››ã€æŠ€æœ¯å®ç°

### 4.1 æ–‡ä»¶ç»“æ„

```
app/
  workspace/
    page.tsx                      # ä¸»å·¥ä½œå°é¡µé¢
    components/
      VersionTimeline.tsx         # ç‰ˆæœ¬æ—¶é—´çº¿ç»„ä»¶
      VersionItem.tsx             # å•ä¸ªç‰ˆæœ¬é¡¹
      DocumentEditor.tsx          # æ–‡æ¡£ç¼–è¾‘å™¨
      AIAssistant.tsx             # AIå¯¹è¯åŠ©æ‰‹
      QuickActions.tsx            # å¿«æ·æŒ‡ä»¤æŒ‰é’®ç»„
      DiffViewer.tsx              # å·®å¼‚å¯¹æ¯”è§†å›¾
      QualityReport.tsx           # è´¨é‡åˆ†ææŠ¥å‘Š
      ScoreCard.tsx               # å•ä¸ªè¯„åˆ†å¡ç‰‡

lib/
  prd/
    analyzer.ts                   # PRDåˆ†æå¼•æ“ï¼ˆç« èŠ‚è¯†åˆ«ã€è´¨é‡è¯„åˆ†ï¼‰
    differ.ts                     # ç‰ˆæœ¬å¯¹æ¯”ï¼ˆdiffç®—æ³•ï¼‰
    sections.ts                   # PRDç« èŠ‚å®šä¹‰å’Œæ¨¡æ¿
    quality-metrics.ts            # è´¨é‡æŒ‡æ ‡è®¡ç®—é€»è¾‘
    templates.ts                  # PRDæ¨¡æ¿åº“

  ai/
    prompts.ts                    # AIæç¤ºè¯æ¨¡æ¿
    client.ts                     # AI APIè°ƒç”¨å°è£…
    types.ts                      # AIç›¸å…³ç±»å‹å®šä¹‰

hooks/
  useVersions.ts                  # ç‰ˆæœ¬ç®¡ç†hook
  useAIChat.ts                    # AIå¯¹è¯hook
  useDiff.ts                      # ç‰ˆæœ¬å¯¹æ¯”hook
  useQualityScore.ts              # è´¨é‡åˆ†æhook
  useLocalStorage.ts              # localStorageå°è£…

types/
  workspace.ts                    # Workspaceç›¸å…³ç±»å‹å®šä¹‰
```

### 4.2 æ•°æ®å­˜å‚¨

#### é˜¶æ®µ1ï¼šæœ¬åœ°å­˜å‚¨ï¼ˆMVPï¼‰
```typescript
// localStorage keys
const STORAGE_KEYS = {
  VERSIONS: 'prd_versions',           // æ‰€æœ‰ç‰ˆæœ¬
  CURRENT_VERSION: 'prd_current',     // å½“å‰é€‰ä¸­ç‰ˆæœ¬ID
  AI_HISTORY: 'prd_ai_history',       // AIå¯¹è¯å†å²
  USER_SETTINGS: 'prd_settings'       // ç”¨æˆ·è®¾ç½®
}
```

#### é˜¶æ®µ2ï¼šäº‘ç«¯å­˜å‚¨ï¼ˆæœªæ¥ï¼‰
- åç«¯API + æ•°æ®åº“
- æ”¯æŒå¤šäººåä½œ
- ç‰ˆæœ¬å†²çªè§£å†³

### 4.3 æ ¸å¿ƒç®—æ³•

#### 4.3.1 ç« èŠ‚è¯†åˆ«ç®—æ³•
```typescript
// lib/prd/analyzer.ts

const PRD_SECTIONS = [
  { name: 'é¡¹ç›®èƒŒæ™¯', keywords: ['èƒŒæ™¯', 'background', 'context'], required: true },
  { name: 'äº§å“ç›®æ ‡', keywords: ['ç›®æ ‡', 'goals', 'objectives'], required: true },
  { name: 'ç›®æ ‡ç”¨æˆ·', keywords: ['ç”¨æˆ·', 'target users', 'å—ä¼—'], required: true },
  { name: 'ç”¨æˆ·åœºæ™¯', keywords: ['åœºæ™¯', 'scenarios', 'user stories'], required: true },
  // ... æ›´å¤šç« èŠ‚
]

function detectSections(content: string): Section[] {
  // 1. æŒ‰è¡Œåˆ†å‰²
  // 2. è¯†åˆ«æ ‡é¢˜ï¼ˆ# ## ### æˆ– 1. 2. 3. æˆ– ä¸€ã€äºŒã€ä¸‰ã€ï¼‰
  // 3. åŒ¹é…å…³é”®è¯
  // 4. è¿”å›ç« èŠ‚åˆ—è¡¨
}
```

#### 4.3.2 è´¨é‡è¯„åˆ†ç®—æ³•
```typescript
// lib/prd/quality-metrics.ts

function calculateCompletenessScore(sections: Section[]): number {
  const requiredSections = PRD_SECTIONS.filter(s => s.required)
  const foundCount = requiredSections.filter(req =>
    sections.some(sec => sec.matches(req))
  ).length
  return (foundCount / requiredSections.length) * 100
}

function calculateClarityScore(content: string): number {
  // æ£€æµ‹ç”¨æˆ·åœºæ™¯æ¨¡å¼ï¼š"ä½œä¸º...æˆ‘æƒ³è¦...ä»¥ä¾¿äº..."
  const userStoryPattern = /(ä½œä¸º|as a).*?(æˆ‘æƒ³è¦|I want).*?(ä»¥ä¾¿äº|so that)/gi
  const matches = content.match(userStoryPattern) || []

  // æ£€æµ‹å…·ä½“æ¡ˆä¾‹ï¼š"ä¾‹å¦‚"ã€"æ¯”å¦‚"
  const examplePattern = /(ä¾‹å¦‚|æ¯”å¦‚|ä¸¾ä¾‹|for example|such as)/gi
  const examples = content.match(examplePattern) || []

  // ç»¼åˆè¯„åˆ†
  const baseScore = Math.min(matches.length * 15, 50)
  const exampleBonus = Math.min(examples.length * 5, 30)
  return Math.min(baseScore + exampleBonus, 100)
}

// ç±»ä¼¼åœ°å®ç°å…¶ä»–è¯„åˆ†å‡½æ•°...
```

### 4.4 UI ç»„ä»¶åº“

ä½¿ç”¨ç°æœ‰çš„ shadcn/ui ç»„ä»¶ï¼š
- `ResizablePanelGroup` / `ResizablePanel` - ä¸‰æ å¸ƒå±€
- `Card` - è´¨é‡æŠ¥å‘Šå¡ç‰‡
- `Button` - å„ç§æŒ‰é’®
- `Textarea` - ç¼–è¾‘å™¨ï¼ˆæˆ–ä½¿ç”¨ Monaco Editorï¼‰
- `Badge` - ç‰ˆæœ¬æ ‡ç­¾ã€è¯„åˆ†æ ‡ç­¾
- `Tabs` - åˆ‡æ¢ä¸åŒè§†å›¾
- `ScrollArea` - æ»šåŠ¨åŒºåŸŸ
- `Separator` - åˆ†éš”çº¿
- `Tooltip` - æç¤ºä¿¡æ¯

### 4.5 ç¬¬ä¸‰æ–¹åº“

| åº“ | ç”¨é€” | åŸå›  |
|----|------|------|
| `diff-match-patch` | æ–‡æœ¬å¯¹æ¯” | ä» index.html å¤ç”¨ï¼Œæˆç†Ÿç¨³å®š |
| `react-resizable-panels` | å¯è°ƒèŠ‚å¸ƒå±€ | å·²åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ |
| `@monaco-editor/react` | ä»£ç ç¼–è¾‘å™¨ï¼ˆå¯é€‰ï¼‰ | æ›´å¥½çš„ç¼–è¾‘ä½“éªŒ |
| `date-fns` | æ—¥æœŸæ ¼å¼åŒ– | å·²åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ |
| `lucide-react` | å›¾æ ‡ | å·²åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ |

---

## äº”ã€å®æ–½æ­¥éª¤

### Phase 1: åŸºç¡€æ¡†æ¶ï¼ˆé¢„è®¡2-3å°æ—¶ï¼‰
- [ ] åˆ›å»º `/workspace` è·¯ç”±å’ŒåŸºç¡€å¸ƒå±€
- [ ] å®ç°ä¸‰æ å¯è°ƒèŠ‚å¸ƒå±€
- [ ] æ·»åŠ å¯¼èˆªé“¾æ¥
- [ ] åˆ›å»ºåŸºç¡€ç»„ä»¶æ–‡ä»¶

### Phase 2: ç‰ˆæœ¬ç®¡ç†ï¼ˆé¢„è®¡3-4å°æ—¶ï¼‰
- [ ] å®ç°ç‰ˆæœ¬æ•°æ®ç»“æ„å’Œ localStorage å­˜å‚¨
- [ ] åˆ›å»ºç‰ˆæœ¬æ—¶é—´çº¿ç»„ä»¶
- [ ] å®ç°æ–‡æ¡£ç¼–è¾‘å™¨ï¼ˆç®€å• textareaï¼‰
- [ ] ä¿å­˜/åŠ è½½/åˆ‡æ¢ç‰ˆæœ¬åŠŸèƒ½
- [ ] ç‰ˆæœ¬åˆ é™¤å’Œå¯¼å‡ºåŠŸèƒ½

### Phase 3: ç‰ˆæœ¬å¯¹æ¯”ï¼ˆé¢„è®¡2-3å°æ—¶ï¼‰
- [ ] ç§»æ¤ diff-match-patch é€»è¾‘åˆ° React
- [ ] åˆ›å»ºåŒæ å¯¹æ¯”è§†å›¾ç»„ä»¶
- [ ] å®ç°é«˜äº®æ˜¾ç¤ºï¼ˆæ–°å¢/åˆ é™¤/ä¿®æ”¹ï¼‰
- [ ] æ·»åŠ ç‰ˆæœ¬é€‰æ‹©å™¨

### Phase 4: PRD åˆ†æå™¨ï¼ˆé¢„è®¡4-5å°æ—¶ï¼‰
- [ ] å®ç°ç« èŠ‚è¯†åˆ«ç®—æ³•
- [ ] å®ç°è´¨é‡è¯„åˆ†ç®—æ³•
  - [ ] å®Œæ•´æ€§è¯„åˆ†
  - [ ] æ¸…æ™°åº¦è¯„åˆ†
  - [ ] æŒ‡æ ‡æ€§è¯„åˆ†
  - [ ] å¯è¡Œæ€§è¯„åˆ†
  - [ ] ä¼˜å…ˆçº§è¯„åˆ†
- [ ] åˆ›å»ºè´¨é‡æŠ¥å‘Šç»„ä»¶
- [ ] ç”Ÿæˆæ”¹è¿›å»ºè®®

### Phase 5: AI åŠ©æ‰‹ï¼ˆé¢„è®¡5-6å°æ—¶ï¼‰
- [ ] è®¾è®¡ AI æç¤ºè¯æ¨¡æ¿
- [ ] å®ç° AI API è°ƒç”¨ï¼ˆéœ€è¦API keyé…ç½®ï¼‰
- [ ] åˆ›å»ºå¯¹è¯ç•Œé¢ç»„ä»¶
- [ ] å®ç°å¿«æ·æŒ‡ä»¤åŠŸèƒ½
- [ ] å°† AI å›å¤æ’å…¥åˆ°ç¼–è¾‘å™¨
- [ ] ä¿å­˜ AI å¯¹è¯å†å²

### Phase 6: ä¼˜åŒ–ä½“éªŒï¼ˆé¢„è®¡2-3å°æ—¶ï¼‰
- [ ] å“åº”å¼å¸ƒå±€é€‚é…
- [ ] å¿«æ·é”®æ”¯æŒï¼ˆCtrl+S ä¿å­˜ç­‰ï¼‰
- [ ] åŠ è½½åŠ¨ç”»å’Œé”™è¯¯å¤„ç†
- [ ] å¯¼å‡ºåŠŸèƒ½ï¼ˆMarkdown/PDFï¼‰
- [ ] ä¸»é¢˜é€‚é…ï¼ˆæš—è‰²/äº®è‰²ï¼‰

### Phase 7: æµ‹è¯•å’Œå®Œå–„ï¼ˆé¢„è®¡2å°æ—¶ï¼‰
- [ ] åŠŸèƒ½æµ‹è¯•
- [ ] è¾¹ç•Œæƒ…å†µå¤„ç†
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] æ–‡æ¡£å®Œå–„

**æ€»é¢„è®¡æ—¶é—´**: 20-26å°æ—¶

---

## å…­ã€å¾…è®¨è®ºé—®é¢˜

### 6.1 ç¼–è¾‘å™¨é€‰æ‹©
**é—®é¢˜**: ä½¿ç”¨ç®€å•çš„ `<textarea>` è¿˜æ˜¯é›†æˆ Monaco Editorï¼Ÿ

**é€‰é¡¹å¯¹æ¯”**:
| æ–¹æ¡ˆ | ä¼˜ç‚¹ | ç¼ºç‚¹ |
|------|------|------|
| Textarea | ç®€å•å¿«é€Ÿï¼Œè½»é‡çº§ | åŠŸèƒ½æœ‰é™ï¼Œæ— è¯­æ³•é«˜äº® |
| Monaco Editor | å¼ºå¤§çš„ç¼–è¾‘åŠŸèƒ½ï¼Œè¯­æ³•é«˜äº®ï¼Œå¿«æ·é”® | ä½“ç§¯è¾ƒå¤§ï¼Œé…ç½®å¤æ‚ |

**å»ºè®®**: MVPé˜¶æ®µå…ˆç”¨ textareaï¼ŒåæœŸæ ¹æ®éœ€è¦å‡çº§

### 6.2 AI API é€‰æ‹©
**é—®é¢˜**: ä½¿ç”¨å“ªä¸ª AI APIï¼Ÿ

**é€‰é¡¹**:
- OpenAI GPT-4 / GPT-3.5
- Anthropic Claude
- æœ¬åœ°æ¨¡å‹ï¼ˆå¦‚ Ollamaï¼‰
- ç”¨æˆ·è‡ªå¸¦ API key

**å»ºè®®**: æ”¯æŒç”¨æˆ·é…ç½®è‡ªå·±çš„ API keyï¼Œé»˜è®¤æä¾›å¤šä¸ªé€‰é¡¹

### 6.3 æ•°æ®å¯¼å‡ºæ ¼å¼
**é—®é¢˜**: é™¤äº† Markdownï¼Œè¿˜éœ€è¦æ”¯æŒå“ªäº›æ ¼å¼ï¼Ÿ

**é€‰é¡¹**:
- [ ] Markdown (.md)
- [ ] PDF
- [ ] Word (.docx)
- [ ] é£ä¹¦/Notion æ ¼å¼

### 6.4 åä½œåŠŸèƒ½
**é—®é¢˜**: æœªæ¥æ˜¯å¦éœ€è¦æ”¯æŒå¤šäººåä½œï¼Ÿ

å¦‚æœéœ€è¦ï¼Œéœ€è¦è€ƒè™‘ï¼š
- å®æ—¶åŒæ­¥
- å†²çªè§£å†³
- è¯„è®ºåŠŸèƒ½
- æƒé™ç®¡ç†

---

## ä¸ƒã€åç»­è¿­ä»£æ–¹å‘

### 7.1 çŸ­æœŸï¼ˆ1-2å‘¨ï¼‰
- [ ] å®Œæˆ MVP æ ¸å¿ƒåŠŸèƒ½
- [ ] ç”¨æˆ·åé¦ˆæ”¶é›†
- [ ] Bug ä¿®å¤å’Œæ€§èƒ½ä¼˜åŒ–

### 7.2 ä¸­æœŸï¼ˆ1ä¸ªæœˆï¼‰
- [ ] å‡çº§ç¼–è¾‘å™¨ï¼ˆMonacoï¼‰
- [ ] å¢å¼º AI èƒ½åŠ›ï¼ˆæ›´å¤šæŒ‡ä»¤ï¼‰
- [ ] PRD æ¨¡æ¿åº“
- [ ] å¯¼å‡ºæ›´å¤šæ ¼å¼

### 7.3 é•¿æœŸï¼ˆ2-3ä¸ªæœˆï¼‰
- [ ] äº‘ç«¯å­˜å‚¨å’ŒåŒæ­¥
- [ ] å¤šäººåä½œåŠŸèƒ½
- [ ] PRD è´¨é‡è¯„åˆ†ç³»ç»Ÿä¼˜åŒ–
- [ ] ä¸é¡¹ç›®ç®¡ç†å·¥å…·é›†æˆï¼ˆJiraã€Notionç­‰ï¼‰

---

## å…«ã€å‚è€ƒèµ„æ–™

### 8.1 ç°æœ‰èµ„æº
- `index.html` - è®ºæ–‡å¯¹æ¯”å·¥å…·ï¼ˆdiffç®—æ³•å‚è€ƒï¼‰
- é¡¹ç›®ç°æœ‰ç»„ä»¶åº“ï¼ˆshadcn/uiï¼‰

### 8.2 æŠ€æœ¯æ–‡æ¡£
- [diff-match-patch æ–‡æ¡£](https://github.com/google/diff-match-patch)
- [Monaco Editor æ–‡æ¡£](https://microsoft.github.io/monaco-editor/)
- [Next.js æ–‡æ¡£](https://nextjs.org/docs)

### 8.3 PRD æ ‡å‡†
- [äº§å“éœ€æ±‚æ–‡æ¡£æ¨¡æ¿](https://www.productplan.com/glossary/product-requirements-document/)
- [ç”¨æˆ·æ•…äº‹æ ¼å¼](https://www.atlassian.com/agile/project-management/user-stories)

---

## å˜æ›´å†å²

| æ—¥æœŸ | å˜æ›´å†…å®¹ | ä½œè€… |
|------|----------|------|
| 2025-10-26 | åˆå§‹ç‰ˆæœ¬ï¼Œå®Œæˆéœ€æ±‚åˆ†æå’Œæ–¹æ¡ˆè®¾è®¡ | Claude |

---

## ä¹ã€2.5å°æ—¶ MVP å®æ–½è®¡åˆ’ï¼ˆå«ä¸Šçº¿éƒ¨ç½²ï¼‰

### æ€»ä½“æ—¶é—´åˆ†é…
- **å‰ç½®å‡†å¤‡**: 15åˆ†é’Ÿ - Supabaseè®¾ç½®ã€ä¾èµ–å®‰è£…
- **æ ¸å¿ƒå¼€å‘**: 100åˆ†é’Ÿ - ä¸»è¦åŠŸèƒ½å®ç°
- **éƒ¨ç½²ä¸Šçº¿**: 15åˆ†é’Ÿ - Verceléƒ¨ç½²å’Œé…ç½®
- **æµ‹è¯•è°ƒæ•´**: 20åˆ†é’Ÿ - æµ‹è¯•å’Œbugä¿®å¤

### è¯¦ç»†æ­¥éª¤

#### Step 0: Supabase é¡¹ç›®è®¾ç½®ï¼ˆ10åˆ†é’Ÿï¼‰
- [ ] åœ¨ Supabase åˆ›å»ºæ–°é¡¹ç›®
- [ ] åˆ›å»ºæ•°æ®åº“è¡¨ç»“æ„ï¼š
  ```sql
  -- projects è¡¨ï¼ˆPRDé¡¹ç›®ï¼‰
  create table projects (
    id uuid primary key default uuid_generate_v4(),
    user_id uuid references auth.users not null,
    name text not null,
    created_at timestamp default now(),
    updated_at timestamp default now()
  );

  -- versions è¡¨ï¼ˆç‰ˆæœ¬å†å²ï¼‰
  create table versions (
    id uuid primary key default uuid_generate_v4(),
    project_id uuid references projects not null,
    version_number int not null,
    content text not null,
    images jsonb default '[]',
    created_at timestamp default now()
  );

  -- å¯ç”¨ RLSï¼ˆè¡Œçº§å®‰å…¨ï¼‰
  alter table projects enable row level security;
  alter table versions enable row level security;

  -- ç­–ç•¥ï¼šç”¨æˆ·åªèƒ½è®¿é—®è‡ªå·±çš„æ•°æ®
  create policy "Users can only access their own projects"
    on projects for all
    using (auth.uid() = user_id);

  create policy "Users can only access their own versions"
    on versions for all
    using (
      exists (
        select 1 from projects
        where projects.id = versions.project_id
        and projects.user_id = auth.uid()
      )
    );
  ```
- [ ] é…ç½® Auth æä¾›å•†ï¼ˆEmail + Passwordï¼‰
- [ ] è·å– API keysï¼ˆanon key + URLï¼‰

#### Step 1: ç¯å¢ƒå‡†å¤‡ï¼ˆ5åˆ†é’Ÿï¼‰
- [ ] å®‰è£…ä¾èµ–:
  ```bash
  pnpm add diff-match-patch @types/diff-match-patch
  pnpm add @supabase/supabase-js @supabase/auth-helpers-nextjs
  ```
- [ ] åˆ›å»º `.env.local`:
  ```
  NEXT_PUBLIC_SUPABASE_URL=your-supabase-url
  NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
  NEXT_PUBLIC_OPENROUTER_API_KEY=your-openrouter-key
  ```
- [ ] åˆ›å»ºåŸºç¡€æ–‡ä»¶ç»“æ„

#### Step 2: é¡µé¢æ¡†æ¶ï¼ˆ15åˆ†é’Ÿï¼‰
- [ ] åˆ›å»º `app/workspace/page.tsx`
- [ ] å®ç°åŒæ å¸ƒå±€ï¼ˆgridæˆ–flexï¼‰
- [ ] æ·»åŠ é¡¶éƒ¨å·¥å…·æ 
- [ ] æ·»åŠ åº•éƒ¨çŠ¶æ€æ 

#### Step 3: ç¼–è¾‘å™¨å’ŒDiffï¼ˆ25åˆ†é’Ÿï¼‰
- [ ] å·¦å³ä¸¤ä¸ª textarea ç»„ä»¶
- [ ] é›†æˆ diff-match-patch åº“
- [ ] å®ç°å®æ—¶ diff è®¡ç®—
- [ ] æ·»åŠ é«˜äº®æ˜¾ç¤ºï¼ˆç»¿è‰²æ–°å¢ã€çº¢è‰²åˆ é™¤ï¼‰
- [ ] æ˜¾ç¤ºæ”¹åŠ¨ç»Ÿè®¡ï¼ˆ+X -Yï¼‰

#### Step 3.5: ç”¨æˆ·è®¤è¯ï¼ˆ15åˆ†é’Ÿï¼‰
- [ ] åˆ›å»º `lib/supabase.ts` - Supabase å®¢æˆ·ç«¯
- [ ] åˆ›å»ºç™»å½•/æ³¨å†Œç»„ä»¶
- [ ] å®ç°ç™»å½•é€»è¾‘
- [ ] å®ç°æ³¨å†Œé€»è¾‘
- [ ] æ·»åŠ ç™»å‡ºåŠŸèƒ½
- [ ] ä¿æŠ¤ workspace è·¯ç”±ï¼ˆéœ€ç™»å½•æ‰èƒ½è®¿é—®ï¼‰

#### Step 4: ç‰ˆæœ¬ç®¡ç†ï¼ˆ20åˆ†é’Ÿï¼‰
- [ ] åˆ›å»ºç‰ˆæœ¬æ•°æ®ç»“æ„ï¼ˆå¯¹æ¥ Supabaseï¼‰
- [ ] åˆ›å»ºé¡¹ç›®ï¼ˆç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶ï¼‰
- [ ] ä¿å­˜ç‰ˆæœ¬åˆ° Supabaseï¼ˆversions è¡¨ï¼‰
- [ ] ä» Supabase åŠ è½½ç‰ˆæœ¬åˆ—è¡¨
- [ ] ç‰ˆæœ¬ä¸‹æ‹‰é€‰æ‹©å™¨
- [ ] åˆ‡æ¢ç‰ˆæœ¬åŠŸèƒ½

#### Step 5: AI é›†æˆï¼ˆ25åˆ†é’Ÿï¼‰
- [ ] åˆ›å»º OpenRouter API è°ƒç”¨å‡½æ•°
- [ ] AI å¯¹è¯ç•Œé¢ï¼ˆç®€å•çš„è¾“å…¥æ¡†+æ¶ˆæ¯åˆ—è¡¨ï¼‰
- [ ] å‘é€å½“å‰æ–‡æ¡£å†…å®¹ç»™ AI
- [ ] æ˜¾ç¤º AI å›å¤
- [ ] "æ’å…¥åˆ°å³ä¾§ç¼–è¾‘å™¨"åŠŸèƒ½

#### Step 6: AI å›¾ç‰‡ç”Ÿæˆï¼ˆ10åˆ†é’Ÿï¼‰
- [ ] æ·»åŠ "ç”Ÿæˆåœºæ™¯å›¾ç‰‡"æŒ‰é’®
- [ ] è°ƒç”¨ OpenRouter å›¾ç‰‡ç”Ÿæˆ API
- [ ] æ˜¾ç¤ºç”Ÿæˆçš„å›¾ç‰‡
- [ ] ä¿å­˜å›¾ç‰‡åˆ°ç‰ˆæœ¬å†å²

#### Step 7: è´¨é‡å¯è§†åŒ–ï¼ˆ10åˆ†é’Ÿï¼‰
- [ ] ç®€å•çš„è´¨é‡è¯„åˆ†ï¼ˆåŸºäºæ–‡æ¡£é•¿åº¦ã€æ–°å¢å†…å®¹ï¼‰
- [ ] åº•éƒ¨çŠ¶æ€æ æ˜¾ç¤º
- [ ] è¿›åº¦æ¡æˆ–è¯„åˆ†å¾½ç« 

#### Step 8: éƒ¨ç½²åˆ° Vercelï¼ˆ15åˆ†é’Ÿï¼‰
- [ ] æäº¤ä»£ç åˆ° Git ä»“åº“
- [ ] è¿æ¥ Vercelï¼ˆimport repositoryï¼‰
- [ ] é…ç½®ç¯å¢ƒå˜é‡ï¼š
  - `NEXT_PUBLIC_SUPABASE_URL`
  - `NEXT_PUBLIC_SUPABASE_ANON_KEY`
  - `NEXT_PUBLIC_OPENROUTER_API_KEY`
- [ ] éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
- [ ] éªŒè¯ä¸Šçº¿åçš„åŠŸèƒ½

#### Step 9: æµ‹è¯•å’Œä¼˜åŒ–ï¼ˆ20åˆ†é’Ÿï¼‰
- [ ] ç”Ÿäº§ç¯å¢ƒåŠŸèƒ½æµ‹è¯•
- [ ] ç”¨æˆ·è®¤è¯æµç¨‹æµ‹è¯•
- [ ] ç‰ˆæœ¬ä¿å­˜/åŠ è½½æµ‹è¯•
- [ ] AI å¯¹è¯å’Œå›¾ç‰‡ç”Ÿæˆæµ‹è¯•
- [ ] æ ·å¼è°ƒæ•´
- [ ] é”™è¯¯å¤„ç†
- [ ] åŠ è½½çŠ¶æ€

### æ–‡ä»¶æ¸…å•

**éœ€è¦åˆ›å»ºçš„æ–‡ä»¶**:
```
app/workspace/page.tsx                 # ä¸»é¡µé¢
app/login/page.tsx                     # ç™»å½•é¡µé¢
components/auth/                       # è®¤è¯ç›¸å…³ç»„ä»¶
  LoginForm.tsx                        # ç™»å½•è¡¨å•
  SignupForm.tsx                       # æ³¨å†Œè¡¨å•
lib/supabase.ts                        # Supabase å®¢æˆ·ç«¯åˆå§‹åŒ–
lib/diff-utils.ts                      # diff è®¡ç®—å·¥å…·
lib/openrouter.ts                      # OpenRouter API å°è£…
lib/db/                                # æ•°æ®åº“æ“ä½œ
  projects.ts                          # é¡¹ç›®ç›¸å…³æ“ä½œ
  versions.ts                          # ç‰ˆæœ¬ç›¸å…³æ“ä½œ
types/workspace.ts                     # ç±»å‹å®šä¹‰
```

**é…ç½®æ–‡ä»¶**:
```
.env.local                             # API keyé…ç½®
NEXT_PUBLIC_SUPABASE_URL=https://xxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJxxx...
NEXT_PUBLIC_OPENROUTER_API_KEY=sk-or-...
```

### ç®€åŒ–ç­–ç•¥

ä¸ºäº†åœ¨2.5å°æ—¶å†…å®Œæˆï¼Œé‡‡ç”¨ä»¥ä¸‹ç®€åŒ–ï¼š

1. **æœ€å°åŒ–ç»„ä»¶æ‹†åˆ†**: æ ¸å¿ƒé€»è¾‘é›†ä¸­ï¼Œåªæ‹†åˆ†å¿…è¦çš„è®¤è¯ç»„ä»¶
2. **æœ€å°åŒ–æ ·å¼**: ä½¿ç”¨ Tailwind å†…è”æ ·å¼ï¼Œä¸å•ç‹¬å†™ CSS
3. **ç®€å•çš„AI**: åªå®ç°åŸºç¡€å¯¹è¯ï¼Œä¸åšå¤æ‚çš„ä¸Šä¸‹æ–‡ç®¡ç†
4. **åŸºç¡€è®¤è¯**: åªç”¨ Email + Passwordï¼Œä¸åš OAuth
5. **åŸºç¡€diff**: åªåšæ–‡æœ¬diffï¼Œä¸åšè¯­ä¹‰åˆ†æ
6. **ç®€å•è¯„åˆ†**: åŸºäºå­—æ•°å’Œæ”¹åŠ¨é‡çš„ç®€å•ç®—æ³•
7. **å•é¡¹ç›®æ¨¡å¼**: MVP é˜¶æ®µæ¯ä¸ªç”¨æˆ·åªæœ‰ä¸€ä¸ªé»˜è®¤é¡¹ç›®

### å…³é”®ä»£ç ç‰‡æ®µ

#### OpenRouter API è°ƒç”¨ç¤ºä¾‹
```typescript
// lib/openrouter.ts
export async function chatWithAI(message: string, context: string) {
  const response = await fetch('https://openrouter.ai/api/v1/chat/completions', {
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${process.env.NEXT_PUBLIC_OPENROUTER_API_KEY}`,
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({
      model: 'anthropic/claude-3.5-sonnet',
      messages: [
        { role: 'system', content: 'You are a PRD assistant.' },
        { role: 'user', content: `Context: ${context}\n\nQuestion: ${message}` }
      ]
    })
  })
  return await response.json()
}

export async function generateImage(prompt: string) {
  const response = await fetch('https://openrouter.ai/api/v1/images/generations', {
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${process.env.NEXT_PUBLIC_OPENROUTER_API_KEY}`,
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({
      model: 'openai/dall-e-3',
      prompt: prompt,
      n: 1,
      size: '1024x1024'
    })
  })
  return await response.json()
}
```

#### Supabase å®¢æˆ·ç«¯åˆå§‹åŒ–
```typescript
// lib/supabase.ts
import { createClientComponentClient } from '@supabase/auth-helpers-nextjs'

export function createClient() {
  return createClientComponentClient()
}
```

#### è®¤è¯ç¤ºä¾‹
```typescript
// components/auth/LoginForm.tsx
import { createClient } from '@/lib/supabase'

export async function login(email: string, password: string) {
  const supabase = createClient()
  const { data, error } = await supabase.auth.signInWithPassword({
    email,
    password
  })
  if (error) throw error
  return data
}

export async function signup(email: string, password: string) {
  const supabase = createClient()
  const { data, error } = await supabase.auth.signUp({
    email,
    password
  })
  if (error) throw error
  return data
}
```

#### ç‰ˆæœ¬å­˜å‚¨ç¤ºä¾‹ï¼ˆSupabaseï¼‰
```typescript
// lib/db/versions.ts
import { createClient } from '@/lib/supabase'

export interface Version {
  id: string
  project_id: string
  version_number: number
  content: string
  images: string[]
  created_at: string
}

export async function saveVersion(
  projectId: string,
  content: string,
  images: string[] = []
): Promise<Version> {
  const supabase = createClient()

  // è·å–å½“å‰æœ€å¤§ç‰ˆæœ¬å·
  const { data: versions } = await supabase
    .from('versions')
    .select('version_number')
    .eq('project_id', projectId)
    .order('version_number', { ascending: false })
    .limit(1)

  const nextVersion = (versions?.[0]?.version_number || 0) + 1

  const { data, error } = await supabase
    .from('versions')
    .insert({
      project_id: projectId,
      version_number: nextVersion,
      content,
      images
    })
    .select()
    .single()

  if (error) throw error
  return data
}

export async function getVersions(projectId: string): Promise<Version[]> {
  const supabase = createClient()
  const { data, error } = await supabase
    .from('versions')
    .select('*')
    .eq('project_id', projectId)
    .order('version_number', { ascending: false })

  if (error) throw error
  return data || []
}
```

#### é¡¹ç›®ç®¡ç†ç¤ºä¾‹
```typescript
// lib/db/projects.ts
import { createClient } from '@/lib/supabase'

export async function getOrCreateDefaultProject(userId: string) {
  const supabase = createClient()

  // æŸ¥æ‰¾ç”¨æˆ·çš„é¡¹ç›®
  const { data: existing } = await supabase
    .from('projects')
    .select('*')
    .eq('user_id', userId)
    .limit(1)
    .single()

  if (existing) return existing

  // åˆ›å»ºé»˜è®¤é¡¹ç›®
  const { data, error } = await supabase
    .from('projects')
    .insert({
      user_id: userId,
      name: 'My PRD Project'
    })
    .select()
    .single()

  if (error) throw error
  return data
}
```

---

**ä¸‹ä¸€æ­¥è¡ŒåŠ¨**: ç”¨æˆ·ç¡®è®¤åç«‹å³å¼€å§‹ MVP å¼€å‘ï¼ˆé¢„è®¡2.5å°æ—¶ï¼Œå« Supabase é›†æˆå’Œ Vercel éƒ¨ç½²ï¼‰

---

## åã€éƒ¨ç½²æ¸…å•

### å‰ç½®æ¡ä»¶
- [ ] Supabase è´¦å·å¹¶åˆ›å»ºé¡¹ç›®
- [ ] OpenRouter API key
- [ ] GitHub ä»“åº“
- [ ] Vercel è´¦å·

### Supabase è®¾ç½®
- [ ] åˆ›å»º `projects` å’Œ `versions` è¡¨
- [ ] é…ç½® RLS ç­–ç•¥
- [ ] å¯ç”¨ Email Auth
- [ ] è·å– API keys

### Vercel éƒ¨ç½²
- [ ] Push ä»£ç åˆ° GitHub
- [ ] è¿æ¥ Vercel
- [ ] é…ç½®ç¯å¢ƒå˜é‡
- [ ] éƒ¨ç½²
- [ ] éªŒè¯åŠŸèƒ½

### ä¸Šçº¿åéªŒè¯
- [ ] ç”¨æˆ·æ³¨å†Œ/ç™»å½•åŠŸèƒ½æ­£å¸¸
- [ ] ç‰ˆæœ¬ä¿å­˜åˆ°æ•°æ®åº“
- [ ] ç‰ˆæœ¬åŠ è½½å’Œåˆ‡æ¢æ­£å¸¸
- [ ] Diff é«˜äº®æ˜¾ç¤ºæ­£å¸¸
- [ ] AI å¯¹è¯åŠŸèƒ½æ­£å¸¸
- [ ] AI å›¾ç‰‡ç”ŸæˆåŠŸèƒ½æ­£å¸¸
- [ ] è´¨é‡ç»Ÿè®¡æ˜¾ç¤ºæ­£å¸¸
